{"version":3,"file":"app.js","sources":["src/helpers/thenBy.js","src/components/musicbar.js","src/app.js"],"sourcesContent":["/***\n   Copyright 2013 Teun Duynstee\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\nvar firstBy = (function() {\n\n    function identity(v){return v;}\n\n    function ignoreCase(v){return typeof(v)===\"string\" ? v.toLowerCase() : v;}\n\n    function makeCompareFunction(f, opt){\n        opt = typeof(opt)===\"number\" ? {direction:opt} : opt||{};\n        if(typeof(f)!=\"function\"){\n            var prop = f;\n            // make unary function\n            f = function(v1){return !!v1[prop] ? v1[prop] : \"\";}\n        }\n        if(f.length === 1) {\n            // f is a unary function mapping a single item to its sort score\n            var uf = f;\n            var preprocess = opt.ignoreCase?ignoreCase:identity;\n            f = function(v1,v2) {return preprocess(uf(v1)) < preprocess(uf(v2)) ? -1 : preprocess(uf(v1)) > preprocess(uf(v2)) ? 1 : 0;}\n        }\n        if(opt.direction === -1) return function(v1,v2){return -f(v1,v2)};\n        return f;\n    }\n\n    /* adds a secondary compare function to the target function (`this` context)\n       which is applied in case the first one returns 0 (equal)\n       returns a new compare function, which has a `thenBy` method as well */\n    function tb(func, opt) {\n        var x = typeof(this) == \"function\" ? this : false;\n        var y = makeCompareFunction(func, opt);\n        var f = x ? function(a, b) {\n                        return x(a,b) || y(a,b);\n                    }\n                  : y;\n        f.thenBy = tb;\n        return f;\n    }\n    return tb;\n})();\n\nexport default firstBy;\n","const Vue = require('vue/dist/vue.common.js');\nimport jsmediatags from 'jsmediatags';\nimport fs from 'fs';\nimport jetpack from 'fs-jetpack'; // module loaded from npm\nimport firstBy from '../helpers/thenBy.js';\nconst { dialog, app } = require('electron').remote;\n\nconsole.log(app.getPath('userData'));\n//Basic object for a song\nvar Song = function(data, path) {\n    this.artist = data.artist || 'Unknown Artist';\n    this.album = data.album || 'Unknown Album';\n    this.title = data.title || 'Unknown Title';\n    this.track = parseInt(data.track) || 0;\n\n    var image = data.picture;\n    if(image) {\n        var base64String = \"\";\n        for (var i = 0; i < image.data.length; i++) {\n            base64String += String.fromCharCode(image.data[i]);\n        }\n        var base64 = \"data:\" + image.format + \";base64,\" +\n                window.btoa(base64String);\n        this.picture = base64;\n    }\n    else {\n        this.picture = './img/albumPlaceHolder.png';\n    }\n    // this.number = data.track.no;\n    // this.albumImg = data.picture[0].data;\n    // this.albumImgExtension = data.picture[0].format;\n\n    this.path = path;\n}\n\n//Starting the view component\nconst musicBar = Vue.component('music-bar', {\n    //Giving it an ID from our html for the template\n    template: '#music-bar',\n    //Getting the music initialized from the main application\n    props: ['musicInit'],\n    //All the data our component uses\n    data: function() {\n        return {\n            //Getting a forward slash or backslash depending on operating system\n            slash: (function() {\n                if(process.platform === 'darwin' || process.platform === 'linux') {\n                    return '/';\n                }\n                else return '\\\\'\n            })(),\n            //Our flex option for taking up the whole page\n            flexOpt: 1,\n            //Bool for if our music is loaded\n            musicLoaded: false,\n            //creating placeholder for our html audio\n            audio: null,\n            //Bool for is the player is playing\n            isPlaying: false,\n            //Array for our library\n            library: [],\n            //String to set the style of the library view, defaults to none\n            libraryView: 'none',\n            //Finding how big our library should be\n            libraryHeight: (window.innerHeight - 100) + 'px',\n            //Object for current song to display in music bar\n            currentSong: {\n                artist: 'No song',\n                title: 'No title',\n                picture: './img/albumPlaceHolder.png',\n                path: './'\n            },\n            //Our index for songs\n            index: 0,\n            //Our percentage of time in the song\n            percentageTime: 0,\n            //String to set the style of a dragging div in order to drag through songs\n            dragging: \"none\",\n            //Getting our directory\n            directory: app.getPath('userData'),\n            //Empty object for user prefs\n            userPrefs: {},\n        }\n    },\n    //Methods the music bar uses\n    methods: {\n        //Gets our music data from file handed to it\n        getMusicData: function(path) {\n            //Setting a variable for the application\n            var musicBar = this;\n            //Hands back a promise to be resolved\n            return new Promise(function(resolve, reject) {\n                //using jsmediatags to read our music file data\n                jsmediatags.read(path, {\n                    onSuccess: function(data) {\n                        musicBar.library.push(new Song(data.tags, path));\n                        //Resolve the promise\n                        resolve();\n                    },\n                    onError: function(error) {\n                        reject();\n                    }\n                })\n            });\n        },\n        //Function to search our directory, takes a path, an empty array for promises, and a callback function\n        searchDir: function(path, promises, callback) {\n            //Getting an array of our files\n            var fileList = jetpack.list(path);\n            for(var i = 0; i < fileList.length; i++) {\n                //Getting the path of the file in list\n                var file = path + this.slash + fileList[i];\n\n                //If the file we are given is actually a folder\n                if(fs.lstatSync(file).isDirectory()) {\n                    //Recurse and run search directory again\n                    this.searchDir(file, promises);\n                }\n                //If the file is an mp3\n                else if(file.substr(file.length - 4) === '.mp3') {\n                    //Push returned data to our promise array\n                    promises.push(this.getMusicData(file));\n                }\n            }\n\n            //If there is a callback\n            if(callback) {\n                //Run our callback function\n                callback(promises);\n            }\n        },\n        //Function to sort our library\n        sortLibrary: function() {\n            this.library.sort(\n                firstBy(function (v) { return v.artist })\n                .thenBy(\"album\")\n                .thenBy(\"track\")\n            );\n        },\n        //Function that opens our file explorer\n        openFileExplorer: function() {\n            //Settign up a variable for our application\n            var musicBar = this;\n            //Open up a file explorer\n            dialog.showOpenDialog({properties: ['openDirectory']}, function(files) {\n                //Getting the path to our files\n                var musicFolder = files[0];\n                //Creating an empty array for promises\n                var promises = []\n                //Run our search directory function, give it a callback\n                musicBar.searchDir(musicFolder, promises, function() {\n                    //This checks all of the promises that were added to our promise array\n                    Promise.all(promises).then(function() {\n                        //Run all of the necessary functions to start the music bar up\n                        musicBar.sortLibrary();\n                        musicBar.currentSong = musicBar.library[0];\n                        musicBar.musicLoaded = true;\n                        musicBar.flexOpt = 'none';\n                        //Sending a message to our main application that the music bar is ready to go\n                        musicBar.$emit('init');\n                        //Saving a library preference to our user preferences\n                        musicBar.userPrefs.library = musicBar.library;\n                        //Save our user preferences to our applications directory\n                        jetpack.write(musicBar.directory + musicBar.slash + 'vizzyPrefs.json', musicBar.userPrefs);\n                    });\n                });\n            });\n        },\n        //The next functions are self explanatory. This is referring to the application itself.\n        play: function() {\n            this.audio.play();\n            this.isPlaying = true;\n        },\n        pause: function() {\n            this.audio.pause();\n            this.isPlaying = false;\n        },\n        prev: function() {\n            if(this.index === 0) {\n                this.index = this.library.length - 1;\n            }\n            else {\n                this.index--;\n            }\n\n            var song = this.library[this.index]\n            if(jetpack.exists(song.path)) {\n                this.currentSong = song;\n            }\n            else {\n                this.prev();\n            }\n            var musicBar = this;\n            this.reset();\n        },\n        next: function() {\n            if(this.index === this.library.length - 1) {\n                this.index = 0;\n            }\n            else {\n                this.index++;\n            }\n\n            var song = this.library[this.index]\n            if(jetpack.exists(song.path)) {\n                this.currentSong = song;\n            }\n            else {\n                console.log('file does not exist skipping');\n                this.next();\n            }\n            this.reset();\n        },\n        setCurrentSong: function(i) {\n            this.currentSong = this.library[i];\n            this.reset();\n        },\n        reset: function() {\n            var musicBar = this;\n            setTimeout(function() {\n                musicBar.pause();\n                musicBar.play();\n            },100);\n        },\n        //Updating the song tracker\n        updateTracker: function() {\n            if(this.musicLoaded) {\n                //Getting the x position of the mouse\n                var x = event.clientX;\n                var width = window.innerWidth;\n\n                var percentage = x/width;\n                this.percentageTime = percentage * 100;\n                this.audio.currentTime = this.audio.duration * percentage;\n            }\n        },\n        //Check if our preferences exist\n        checkPrefs: function() {\n            if(jetpack.exists(this.directory + this.slash + 'vizzyPrefs.json')) {\n                var prefs = JSON.parse(jetpack.read(this.directory + this.slash + 'vizzyPrefs.json', ['jsonWithDates']));\n                console.log(prefs);\n                this.library = prefs.library;\n                this.sortLibrary();\n                this.currentSong = this.library[0];\n                this.musicLoaded = true;\n                this.flexOpt = 'none';\n                this.$emit('init');\n            }\n        },\n    },\n    //This runs when the application is mounted\n    mounted: function () {\n        this.checkPrefs();\n\n        var musicBar = this;\n\n        this.audio = document.getElementById('vizzy-audio');\n        this.audio.onended = function() {\n            musicBar.next();\n        }\n\n        var tracker = document.getElementById('tracker');\n        var container = document.getElementById('drag-container');\n\n        tracker.addEventListener('mousedown', function() {\n            musicBar.updateTracker();\n            musicBar.dragging = 'block';\n        }, false);\n\n        container.addEventListener('mousemove', function() {\n            if (musicBar.dragging === \"block\") {\n                musicBar.updateTracker();\n            };\n        }, false);\n\n        container.addEventListener('mouseup', function() {\n            musicBar.dragging = 'none';\n        }, false);\n\n        function updateTime() {\n            if(musicBar.isPlaying) {\n                var currentTime = musicBar.audio.currentTime;\n                var duration = musicBar.audio.duration;\n                musicBar.percentageTime = (currentTime/duration) * 100;\n            }\n            window.requestAnimationFrame(updateTime);\n        }\n\n        window.requestAnimationFrame(updateTime);\n    }\n});\n\nexport default {\n    musicBar\n}\n","// Here is the starting point for your application code.\n// All stuff below is just to show you how it works. You can delete all of it.\n\n// Use new ES6 modules syntax for everything.\nimport os from 'os'; // native node.js module\nimport { remote } from 'electron'; // native electron module\nimport fs from 'fs';\n\nconst Vue = require('vue/dist/vue.common.js');\nimport musicBar from './components/musicbar';\n\nvar dummyCanvas = {\n    shapes: [\n        {\n            id: \"Circle\",\n            minWidth: 10,\n            maxWidth: 20,\n            minHeight: 10,\n            maxHeight: 20,\n        },\n        {\n            id: \"Circle 1\",\n            minWidth: 10,\n            maxWidth: 20,\n            minHeight: 10,\n            maxHeight: 20,\n        },\n        {\n            id: \"Circle 2\",\n            minWidth: 10,\n            maxWidth: 20,\n            minHeight: 10,\n            maxHeight: 20,\n        },\n        {\n            id: \"Circle 3\",\n            minWidth: 10,\n            maxWidth: 20,\n            minHeight: 10,\n            maxHeight: 20,\n        },\n        {\n            id: \"Circle 4\",\n            minWidth: 10,\n            maxWidth: 20,\n            minHeight: 10,\n            maxHeight: 20,\n        },\n    ]\n}\n\nconst app = new Vue({\n    el: \".app\",\n    data: {\n        canvas: dummyCanvas,\n        musicInit: false,\n        state: {\n            home: false,\n            editor: true,\n        },\n        selectedShape: ''\n    },\n    methods: {\n        musicInitialize: function() {\n            this.musicInit = true;\n        },\n        selectShape: function(i) {\n            this.selectedShape = this.canvas.shapes[i];\n        }\n    },\n    mounted: function() {\n\n        //initialize audio context & audio nodes\n        var audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        var source = audioContext.createMediaElementSource(document.getElementById('vizzy-audio'));\n        var analyze = audioContext.createAnalyser();\n        analyze.fftsize=2048;\n        analyze.smoothingTimeConstant=.5; //smoothing time is important for vizualization\n\n        //connect audio nodes\n        source.connect(analyze);\n        analyze.connect(audioContext.destination);\n\n        function musicData(){\n            var buffer = analyze.frequencyBinCount;\n            var data = new Uint8Array(buffer);\n            analyze.getByteFrequencyData(data);\n\n            //find the dominant frequency bin\n            var max = 0;\n            var index = -1;\n            for (var i = 0; i < buffer; i++){\n                if (data[i]>max){\n                    max = data[i];\n                    index = i;\n                }\n            }\n            //calculate the dominant frequency\n            var frequency = (index * 44100)/ 2048.0;\n\n            return {\n                'frequency': frequency\n            };\n        }\n\n        function refresh(){\n            //console.log(musicData())\n            window.requestAnimationFrame(refresh);\n        }\n\n        window.requestAnimationFrame(refresh);\n    }\n});\n"],"names":["Vue","app"],"mappings":"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"}