{"version":3,"file":"app.js","sources":["src/env.js","src/app.js"],"sourcesContent":["// Simple wrapper exposing environment variables to rest of the code.\r\n\r\nimport jetpack from 'fs-jetpack';\r\n\r\n// The variables have been written to `env.json` by the build process.\r\nvar env = jetpack.cwd(__dirname).read('env.json', 'json');\r\n\r\nexport default env;\r\n","// Here is the starting point for your application code.\r\n// All stuff below is just to show you how it works. You can delete all of it.\r\n\r\n// Use new ES6 modules syntax for everything.\r\nimport os from 'os'; // native node.js module\r\nimport { remote } from 'electron'; // native electron module\r\nimport jetpack from 'fs-jetpack'; // module loaded from npm\r\nimport fs from 'fs';\r\nimport env from './env';\r\nimport mm from 'musicmetadata';\r\nconst Vue = require('vue/dist/vue.common.js');\r\nconst {dialog} = require('electron').remote;\r\nconsole.log(dialog);\r\n\r\nconst app = new Vue({\r\n    el: \".app\",\r\n    data: {\r\n        hello: 'Hello Vue App',\r\n        audio: document.getElementById('vizzy-audio'),\r\n        library: [],\r\n        currentSong: {path: './'},\r\n    },\r\n    methods: {\r\n        openFileExplorer: function() {\r\n            dialog.showOpenDialog({properties: ['openDirectory']}, function(files) {\r\n                var musicFolder = files[0];\r\n                getMusicData(musicFolder, function() {\r\n                    console.log(app.library);\r\n                    app.currentSong = app.library[0];\r\n                    app.audio.play();\r\n                });\r\n            });\r\n        }\r\n    }\r\n});\r\n\r\n//Basic object for a song\r\nvar Song = function(data, path) {\r\n    this.artist = data.artist[0];\r\n    this.album = data.album;\r\n    this.title = data.title;\r\n    this.number = data.track.no;\r\n    this.albumImg = data.picture[0].data;\r\n    this.albumImgExtension = data.picture[0].format;\r\n\r\n    this.path = path;\r\n}\r\n\r\n//Function that will get music data, and populate the library with song objects\r\nvar getMusicData = function(path, callback) {\r\n    console.log(fs.lstatSync(path).isDirectory());\r\n    var fileList = jetpack.list(path);\r\n    for(var i = 0; i < fileList.length; i++) {\r\n        var file = path + \"\\\\\" + fileList[i];\r\n\r\n        if(fs.lstatSync(file).isDirectory()) {\r\n            getMusicData(file);\r\n        }\r\n        else if(file.includes('.mp3')) {\r\n            var stream = fs.createReadStream(file);\r\n            mm(stream, function(err, data) {\r\n                stream.close();\r\n                app.library.push(new Song(data, file));\r\n\r\n                if(callback) {\r\n                    callback();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}