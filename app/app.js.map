{"version":3,"file":"app.js","sources":["src/env.js","src/app.js"],"sourcesContent":["// Simple wrapper exposing environment variables to rest of the code.\n\nimport jetpack from 'fs-jetpack';\n\n// The variables have been written to `env.json` by the build process.\nvar env = jetpack.cwd(__dirname).read('env.json', 'json');\n\nexport default env;\n","// Here is the starting point for your application code.\n// All stuff below is just to show you how it works. You can delete all of it.\n\n// Use new ES6 modules syntax for everything.\nimport os from 'os'; // native node.js module\nimport { remote } from 'electron'; // native electron module\nimport jetpack from 'fs-jetpack'; // module loaded from npm\nimport fs from 'fs';\nimport env from './env';\nimport jsmediatags from 'jsmediatags';\nconst Vue = require('vue/dist/vue.common.js');\nconst {dialog} = require('electron').remote;\n\nconst app = new Vue({\n    el: \".app\",\n    data: {\n        hello: 'Hello Vue App',\n        audio: '',\n        musicInit: false,\n        isPlaying: false,\n        library: [],\n        currentSong: {artist: 'No song', title: 'No title', path: './'},\n        index: 0\n    },\n    methods: {\n        openFileExplorer: function() {\n            dialog.showOpenDialog({properties: ['openDirectory']}, function(files) {\n                var musicFolder = files[0];\n                searchDir(musicFolder, function() {\n                });\n            });\n        },\n        play: function() {\n            this.audio.play();\n            app.isPlaying = true;\n        },\n        pause: function() {\n            this.audio.pause();\n            app.isPlaying = false;\n        },\n        prev: function() {\n            if(this.index === 0) {\n                this.index = this.library.length - 1;\n            }\n            else {\n                this.index--;\n            }\n            this.currentSong = this.library[this.index];\n            setTimeout(function() {\n                app.pause();\n                app.play();\n            },100);\n        },\n        next: function() {\n            if(this.index === this.library.length - 1) {\n                this.index = 0;\n            }\n            else {\n                this.index++;\n            }\n            this.currentSong = this.library[this.index];\n            setTimeout(function() {\n                app.pause();\n                app.play();\n            },100);\n        }\n    },\n    mounted: function() {\n        this.audio = document.getElementById('vizzy-audio');\n        console.log(this.audio);\n    }\n});\n\n//Basic object for a song\nvar Song = function(data, path) {\n    this.artist = data.artist;\n    this.album = data.album;\n    this.title = data.title;\n    // this.number = data.track.no;\n    // this.albumImg = data.picture[0].data;\n    // this.albumImgExtension = data.picture[0].format;\n\n    this.path = path;\n}\n\nvar slash = (function() {\n    if(process.platform === 'darwin') {\n        return '/';\n    }\n    else return '\\\\'\n})();\n\nvar getMusicData = function(path) {\n    jsmediatags.read(path, {\n        onSuccess: function(data) {\n            app.library.push(new Song(data.tags, path));\n\n            if(!app.musicInit) {\n                app.currentSong = app.library[0];\n                app.musicInit = true;\n            }\n        },\n        onError: function(error) {\n            console.log(':(', error.type, error.info);\n        }\n    });\n}\n\n//Function that will get music data, and populate the library with song objects\nvar searchDir = function(path, callback) {\n    console.log(fs.lstatSync(path).isDirectory());\n    var fileList = jetpack.list(path);\n    for(var i = 0; i < fileList.length; i++) {\n        var file = path + slash + fileList[i];\n\n        if(fs.lstatSync(file).isDirectory()) {\n            searchDir(file);\n        }\n        else if(file.substr(file.length - 4) === '.mp3') {\n            getMusicData(file);\n        }\n        else {\n            console.log(file);\n        }\n    }\n\n    if(callback) {\n        callback();\n    }\n}\n"],"names":[],"mappings":"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"}